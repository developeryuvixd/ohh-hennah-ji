<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kiss Day â€“ The Distance ðŸ’‹</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    font-family:'Segoe UI',sans-serif;
    color:white;
}

/* Prevent text selection globally */
*{
    user-select:none;
    -webkit-user-select:none;
    -webkit-touch-callout:none;
}

/* Cinematic Intro */
#intro{
    position:absolute;
    width:100%;
    height:100%;
    background:black;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:2rem;
    z-index:20;
    text-align:center;
}

/* UI */
#ui{
    position:absolute;
    top:20px;
    left:20px;
    z-index:10;
}

button{
    padding:10px 18px;
    margin:5px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    background:rgba(255,255,255,0.1);
    backdrop-filter:blur(10px);
    color:white;
    font-weight:600;
    transition:0.3s;
}

button:active{
    transform:scale(0.95);
}

button:hover{
    background:rgba(255,255,255,0.25);
}

/* Distance Box */
#distanceBox{
    position:absolute;
    top:20px;
    right:20px;
    padding:15px;
    background:rgba(0,0,0,0.5);
    backdrop-filter:blur(10px);
    border-radius:15px;
    text-align:center;
    z-index:10;
    max-width:320px;
}

/* Move Section */
#moveSection{
    position:absolute;
    bottom:140px;
    left:50%;
    transform:translateX(-50%);
    z-index:10;
}

/* Final Message */
#finalMessage{
    position:absolute;
    width:100%;
    text-align:center;
    top:50%;
    transform:translateY(-50%);
    font-size:2.3rem;
    opacity:0;
    transition:1.5s;
    z-index:15;
}

/* Final Button */
#finalBtn{
    position:absolute;
    bottom:40px;
    left:50%;
    transform:translateX(-50%);
    opacity:0;
    transition:1s;
    z-index:15;
}

/* Whisper Mode */
.whisper{
    background:radial-gradient(circle,#ff4da6,black);
}
</style>
</head>

<body>

<div id="intro">
    The distance between Raiganj and Bhubaneswar is real...<br><br>
    But maybe not for long ðŸ’‹
</div>

<canvas id="bg"></canvas>

<div id="ui">
    <button onclick="setMode('cute')">Cute ðŸ’—</button>
    <button onclick="setMode('emotional')">Emotional ðŸŒ™</button>
    <button onclick="setMode('intense')">Intense ðŸ”¥</button>
    <button onclick="setMode('playful')">Playful ðŸ˜ˆ</button>
    <button onclick="whisperMode()">Whisper ðŸŒ™</button>
</div>

<div id="distanceBox">
    <strong>Raiganj â†’ Bhubaneswar</strong><br>
    Road Distance:<br>
    <span id="distance">817</span> km
    <br><br>

    <iframe
      width="100%"
      height="180"
      style="border:0; border-radius:12px;"
      loading="lazy"
      allowfullscreen
      src="https://www.google.com/maps?q=Raiganj+to+Bhubaneswar&output=embed">
    </iframe>
</div>

<div id="moveSection">
    <button id="holdBtn">Hold To Close The Distance ðŸ’‹</button>
</div>

<div id="finalMessage">
    ðŸ’— No more distance.<br>This kiss is yours.
</div>

<button id="finalBtn" onclick="goToSong()">Final Surprise ðŸ’ž</button>

<script>

/* Intro Fade */
gsap.to("#intro",{
    opacity:0,
    duration:2,
    delay:4,
    onComplete:()=>{document.getElementById("intro").style.display="none";}
});

/* THREE JS BACKGROUND */
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({canvas:document.getElementById("bg"),alpha:true});
renderer.setSize(window.innerWidth,window.innerHeight);
camera.position.z=6;

const heartShape=new THREE.Shape();
heartShape.moveTo(0,0);
heartShape.bezierCurveTo(0,0,-0.5,-0.5,-1,0);
heartShape.bezierCurveTo(-2,1,-1,2,0,3);
heartShape.bezierCurveTo(1,2,2,1,1,0);
heartShape.bezierCurveTo(0.5,-0.5,0,0,0,0);

const geometry=new THREE.ExtrudeGeometry(heartShape,{depth:0.2,bevelEnabled:false});
const material=new THREE.MeshBasicMaterial({color:0xff4da6});

const hearts=[];
for(let i=0;i<50;i++){
    const mesh=new THREE.Mesh(geometry,material);
    mesh.scale.set(0.25,0.25,0.25);
    mesh.position.set(
        (Math.random()-0.5)*12,
        (Math.random()-0.5)*12,
        (Math.random()-0.5)*12
    );
    scene.add(mesh);
    hearts.push(mesh);
}

function animate(){
    requestAnimationFrame(animate);
    hearts.forEach(h=>{
        h.rotation.y+=0.01;
        h.rotation.x+=0.005;
    });
    renderer.render(scene,camera);
}
animate();

/* DISTANCE SYSTEM */
let distance=817;
let holding=false;

const distanceSpan=document.getElementById("distance");
const finalMsg=document.getElementById("finalMessage");
const finalBtn=document.getElementById("finalBtn");
const holdBtn=document.getElementById("holdBtn");

/* Desktop */
holdBtn.addEventListener("mousedown",(e)=>{
    e.preventDefault();
    holding=true;
});
document.addEventListener("mouseup",()=>holding=false);

/* Mobile */
holdBtn.addEventListener("touchstart",(e)=>{
    e.preventDefault();
    holding=true;
});
document.addEventListener("touchend",()=>holding=false);

/* Reduce Distance */
setInterval(()=>{
    if(holding && distance>0){
        distance-=3;
        if(distance<0) distance=0;
        distanceSpan.innerText=distance;
        camera.position.z -=0.015;
    }

    if(distance<=0){
        finalMsg.style.opacity=1;
        finalBtn.style.opacity=1;
    }
},40);

/* Modes */
function setMode(mode){
    if(mode==="cute") document.body.style.background="#ffb6c1";
    if(mode==="emotional") document.body.style.background="black";
    if(mode==="intense") document.body.style.background="#2b0000";
    if(mode==="playful") document.body.style.background="#ff1493";
}

/* Whisper */
function whisperMode(){
    document.body.classList.toggle("whisper");
}

/* Redirect */
function goToSong(){
    window.location.href="song.html";
}

</script>
</body>
</html>
